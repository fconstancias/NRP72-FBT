Test https://git-r3lab.uni.lu/laura.denies/PathoFact/-/tree/orf

# data preparation:

## What we need:

We need: the following files are generated by PathoFact itself if format in the config.yaml is set to assembly. If format is set to orf the own assembly files can be used and needed to be provided as following:


- *.faa: FASTA file conatining translated gene sequences, i.e. amino acid sequences

no whitespaces in FASTA headers for prediction of toxins, virulence factors and antimicrobial resistance genes


- *.contig: TAB-delimited file containing a mapping from contig ID (1st column) to gene ID (2nd column)

no header, one gene ID per line
contig and gene IDs should be the same as in the FASTA files


## What we have:

From SQM:
- fasta file containing genes: 03.chicken.faa
	- 	header contains contig_id + "_" gene coordinates

## We need to:

-Filter AA fasta file
-Simplify the header
-Generate a data frame contig ID gene ID.

-> R?

functions/prepare_faa_fna_PAthoFact_orf.Rscript.R

 Rscript ~/Documents/GitHub/NRP72-FBT/functions/prepare_faa_fna_PAthoFact_orf.Rscript.R --contig_fasta_file_path  ~/Desktop/01.chicken.fasta --aa_file_path ~/Desktop/03.chicken.faa -l 1000 -s chicken1_l1000_test
 
 conda activate PathoFact
 snakemake -s Snakefile --use-conda --reason --cores 5 -p --configfile orfs_chicken1_Tox/config.yaml
 
 
tar \
 --exclude='contig_splitted' --exclude='renamed' --exclude='splitted' --exclude='*.faa' \
 --exclude='*.fna' --exclude='*.contig' -zcvf PathoFact_chicken1_AMR.tar.gz .
 
# chicken2:

Rscript ../../../../functions/prepare_faa_fna_PAthoFact_orf.Rscript.R --contig_fasta_file_path results/01.chicken2.fasta --aa_file_path  results/03.chicken2.faa -l 1000 -s chicken2_l1000

/datadrive05/Flo/tools/PathoFact_orf/orfs_chicken2

cd /datadrive05/Flo/tools/PathoFact_orf/

conda activate PathoFact
snakemake -s Snakefile --use-conda --reason --cores 1 -p --configfile orfs_chicken2/config.yaml
 
cd /datadrive05/Flo/tools/PathoFact_orf/orfs_chicken2


tar \
 --exclude='contig_splitted' --exclude='renamed' --exclude='splitted' --exclude='*.faa' --exclude='*.fna' --exclude='PathoFact_chicken2_AMR.tar.gz' --exclude='*.contig' -zcvf PathoFact_chicken2_AMR.tar.gz .
 

# human1-chicken1 single assemblies:
 
cd /Volumes/Pegasus3R4/NRP72/individual_SQM_binning/chicken1/scelse/SQM
#
out=/Volumes/Pegasus3R4/NRP72/individual_SQM_binning/chicken1/scelse/PathoFact_1000_ready

mkdir ${out}

for dir in ls -lh *; do
#
echo ${dir}
#
ls -lh ${dir}/results/01.${dir}.fasta  ${dir}/results/03.${dir}.faa
#
Rscript ~/Documents/GitHub/NRP72-FBT/functions/prepare_faa_fna_PAthoFact_orf.Rscript.R \
--contig_fasta_file_path ${dir}/results/01.${dir}.fasta \
--aa_file_path ${dir}/results/03.${dir}.faa \
-l 1000 \
-o ${out} \
-s ${dir}_PathoFact_1000
#
done
#
cd /Volumes/Pegasus3R4/NRP72/individual_SQM_binning/human1/scelse/SQM
#
for dir in ls  *; do
#
echo ${dir}
#
ls -lh ${dir}/results/01.${dir}.fasta  ${dir}/results/03.${dir}.faa
#
Rscript ~/Documents/GitHub/NRP72-FBT/functions/prepare_faa_fna_PAthoFact_orf.Rscript.R \
--contig_fasta_file_path ${dir}/results/01.${dir}.fasta \
--aa_file_path ${dir}/results/03.${dir}.faa \
-l 1000 \
-o ${out} \
-s ${dir}_PathoFact_1000
#
done
#
cd ${out}
#
rename s/_PathoFact_1000// *PathoFact_1000*
#
tar --exclude='*_report.tsv' -zcvf PathoFact_chicken1_human1_PathoFact_Ready.tar.gz .
#
rsync -Pv PathoFact_chicken1_human1_PathoFact_Ready.tar.gz constancias@10.97.121.93:/datadrive05/Flo/tools/orf_coinf/human1_chicken1_SS/ 

| thene text edit trick.
From list to coma spearated for pathofact 
ls *faa | sed 's/^\|$/"/g'|paste -sd, -
